<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

<div class="recipe-form">
    <h2>Make Recipe</h2>
    <form (ngSubmit)="addRecipe()">
        <div>
            <label for="name">Name:</label>
            <input type="text" id="name" [(ngModel)]="newRecipe.name" name="name" required>
        </div>
        <div>
            <label for="description">Description:</label>
            <textarea id="description" [(ngModel)]="newRecipe.description" name="description" required></textarea>
            <label for="ingredient">Amount</label>
            <select [(ngModel)]="ingredientAmount" name="ingredientAmount">
                <option *ngFor="let amount of amounts">{{ amount }}</option>
            </select>
        </div>
        <div>
            <label for="image">Image URL:</label>
            <input type="text" id="image" [(ngModel)]="newRecipe.image" name="image" required>
        </div>
        <button type="submit">Submit</button>
    </form>
</div>

<div class="recipe-list">
    <h2>Added Recipe Here</h2>

    <div>
        <input type="text" [(ngModel)]="searchTerm" placeholder="Search recipes..." />
        <button (click)="searchRecipes()">Search</button>
        <button (click)="clearSearch()">Clear</button>
    </div>
   
    <div *ngFor="let recipe of filteredRecipes; let i = index" class="recipe-item">
       <h3>Name</h3>
        <p>{{ recipe.name }}</p>
        <h3>Description</h3>
        <p>{{ recipe.description }}</p>
        <h3>Amount</h3>
        <p>{{ ingredientAmount }}</p>
        <img [src]="recipe.image" alt="{{ recipe.name }}">
        <br>
        <br>
        <div class="button-group">
            <button (click)="viewRecipe(i)">View Recipe</button>
            <button (click)="goToShoppingList()">Shopping List</button>
        </div> 
    </div>
</div>

<!-- Recipe Detail Modal -->
<div *ngIf="selectedRecipe" class="recipe-detail">
    <form *ngIf="isEditing" (ngSubmit)="saveRecipe()">
        <h2><input [(ngModel)]="selectedRecipe.name" name="recipeName" required></h2>
        <p><textarea [(ngModel)]="selectedRecipe.description" name="recipeDescription" required></textarea></p>
        <ul>
            <p *ngFor="let ingredient of selectedRecipe.ingredients; let i = index">
                <select [(ngModel)]="ingredientAmounts[i]" name="ingredientAmount{{i}}">
                    <option *ngFor="let amount of amounts">{{ amount }}</option>
                </select>
            </p>
        </ul>
        <img [src]="selectedRecipe.image" alt="{{ selectedRecipe.name }}">
        <br>
        <button type="button" (click)="addNewIngredient()">Add Ingredient</button>
        <button type="button" (click)="removeSelectedIngredient(i)">Remove ingredient</button>
    </form>
    <div *ngIf="!isEditing">
        <p>{{"Recipe Name: " + selectedRecipe.name }}</p>
        <p>{{ "Description : " + selectedRecipe.description }}</p>
        <p>{{ "Amount:  " + ingredientAmount }}</p>
        <ul>
            <p *ngFor="let ingredient of selectedRecipe.ingredients">{{ ingredient }}</p>
        </ul>
        <img [src]="selectedRecipe.image" alt="{{ selectedRecipe.name }}">
    </div>
    <div class="modal-buttons">
        <button *ngIf="!isEditing" (click)="editRecipe()">Edit Recipe</button>
        <button *ngIf="isEditing" (click)="saveRecipe()">Save</button>
        <button *ngIf="isEditing" (click)="cancelEdit()">Cancel</button>
        <button (click)="deleteRecipe(selectedRecipeIndex)">Delete Recipe</button>
        <button (click)="closeRecipeDetail()">Close</button>
    </div>
</div>
